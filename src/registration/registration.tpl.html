<div class="reg-loading" ng-if="regCtrl.isLoading">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw" ng-if="!regCtrl.regComplete"></i>
    <h2 ng-if="regCtrl.regComplete">{{regCtrl.regMessage}}</h2>

    <h2 >{{regCtrl.loadingMessage}}...</h2>
</div>
<div class="reg-loading" ng-if="regCtrl.regComplete">
    <h2>Registro Completo</h2>
    <a href="#!/home" class="btn btn-success" ng-if="regCtrl.regComplete">Continuar</a>
</div>
<div class="row reg-container" ng-if="!regCtrl.isLoading && !regCtrl.regComplete">
    <div class="col-md-6 col-xs-12 col-md-offset-3">
        <h2>Registro de Asistencia</h2>
        <profile user="regCtrl.user" action="regCtrl.login" is-logged="regCtrl.allowReg"></profile>
        <div ng-if="regCtrl.allowReg">
            <legend>Datos personales</legend>
            <form name="form" ng-submit="regCtrl.register()" role="form">
                <div class="form-group" ng-class="{ 'has-error': form.firstName.$dirty && form.firstName.$error.required }">
                    <label for="username">Nombres</label>
                    <input type="text" name="firstName" id="firstName" class="form-control" ng-model="regCtrl.data.firstName" required />
                    <span ng-show="form.firstName.$dirty && form.firstName.$error.required" class="help-block">El Nombre es requerido</span>
                </div>
                <div class="form-group" ng-class="{ 'has-error': form.lastName.$dirty && form.lastName.$error.required }">
                    <label for="lastName">Apellidos</label>
                    <input type="text" name="lastName" id="Text1" class="form-control" ng-model="regCtrl.data.lastName" required />
                    <span ng-show="form.lastName.$dirty && form.lastName.$error.required" class="help-block">Apellidos es requerido</span>
                </div>
                <div class="form-group" ng-class="{ 'has-error': form.country.$dirty && form.country.$error.required }">
                    <label class="col-xs-12 no-width-padding" for="username">Pais</label>
                    <country-selector selected-country="regCtrl.selectedCountry" selected-alpha="regCtrl.selectedAlpha"></country-selector>
                </div>
                <div class="form-group" ng-class="{ 'has-error': form.passport.$dirty && form.passport.$error.required }">
                    <label for="passport">N. de pasaporte / DNI</label>
                    <input type="text" name="passport" id="Text2" class="form-control" ng-model="regCtrl.data.passport" required />
                    <span ng-show="form.passport.$dirty && form.passport.$error.required" class="help-block">Pasaporte es requerido</span>
                </div>

                <div class="form-group" ng-class="{ 'has-error': form.email.$dirty && form.email.$error.required }">
                    <label for="email">Email</label>
                    <input type="email" name="email" id="Text4" class="form-control" ng-model="regCtrl.data.email" required />
                    <span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">email es requerido</span>
                </div>

                <div class="form-group">
                    <label ng-repeat="option in regCtrl.options" class="radio-custom">
                     <input type="radio" name="response" data-ng-model="option.selected" data-ng-value="true" ng-click="regCtrl.optionSelectionChange(option, regCtrl.options)"/>
                    {{option.value}}
                </label>
                </div>
                <!-- /input-group -->
                <div class="form-group">
                    <label for="username">Talla de Polera</label> <br>
                    <label ng-repeat="option in regCtrl.tallas" class="radio-custom">
                     <input type="radio" name="talla" data-ng-model="option.selected" data-ng-value="true" ng-click="regCtrl.tallaSelectionChange(option, regCtrl.tallas)"/>
                    {{option.value}}
                </label>
                </div>

                <div class="form-group" ng-class="{ 'has-error': form.alergies.$dirty && form.alergies.$error.required }">
                    <label for="alergies">Alergias</label>
                    <input type="text" name="alergies" id="Text3" class="form-control" ng-model="regCtrl.data.alergies" />
                    <span ng-show="form.alergies.$dirty && form.alergies.$error.required" class="help-block">Alergias</span>
                </div>

                <div class="form-group" ng-class="{ 'has-error': form.observations.$dirty && form.observations.$error.required }">
                    <label for="observations">Otras Observaciones</label>
                    <input type="text" name="observations" id="Text5" class="form-control" ng-model="regCtrl.data.observations" />
                    <span ng-show="form.observations.$dirty && form.observations.$error.required" class="help-block">observations es requerido</span>
                </div>

                <legend>LLegada</legend>
                <div class="form-group" ng-class="{ 'has-error': form.arrive.$dirty && form.arrive.$error.required }">
                    <div class="col-md-6 col-sx-12">
                        <label for="arrive">Fecha de arribo:</label>

                        <p class="input-group my-datepicker">
                            <input type="date" class="form-control" uib-datepicker-popup ng-model="regCtrl.data.arriveDate" is-open="regCtrl.arriveOpen"
                                ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default calendar-btn" ng-click="regCtrl.arriveOpen = !regCtrl.arriveOpen"><i class="fa fa-calendar"></i></button>
                        </span>
                        </p>

                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="arrive">Hora de arribo:</label>
                        <div uib-timepicker ng-model="regCtrl.data.arriveDate" required show-meridian="true"></div>
                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="arriveCompany">Línea Aérea:</label>
                        <input type="text" name="arriveCompany" id="Text6" class="form-control" ng-model="regCtrl.data.arriveCompany" required/>
                        <span ng-show="form.arriveCompany.$dirty && form.arriveCompany.$error.required" class="help-block">Aerolinea es requerido</span>
                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="arrivefligth">Nº de Vuelo:</label>
                        <input type="text" name="arrivefligth" id="Text7" class="form-control" ng-model="regCtrl.data.arrivefligth" required/>
                        <span ng-show="form.arrivefligth.$dirty && form.arrivefligth.$error.required" class="help-block">Nº de Vuelo es requerido</span>
                    </div>
                </div>
                <legend>Partida</legend>
                <div class="form-group" ng-class="{ 'has-error': form.departure.$dirty && form.departure.$error.required }">
                    <div class="col-md-6 col-sx-12">
                        <label for="departure">Fecha de partida:</label>
                        <p class="input-group my-datepicker">
                            <input type="date" class="form-control" uib-datepicker-popup ng-model="regCtrl.data.departureDate" datepicker-options="regCtrl.dateOptions"
                                is-open="regCtrl.departureOpened" ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default calendar-btn" ng-click="regCtrl.departureOpened = !regCtrl.departureOpened"><i class="fa fa-calendar"></i></button>
                        </span>
                        </p>
                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="departure">Hora de partida:</label>
                        <div uib-timepicker ng-model="regCtrl.data.departureDate" show-meridian="true" required></div>
                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="departureCompany">Línea Aérea:</label>
                        <input type="text" name="departureCompany" id="Text8" class="form-control" ng-model="regCtrl.data.departureCompany" required/>
                        <span ng-show="form.departureCompany.$dirty && form.departureCompany.$error.required" class="help-block">Aerolinea es requerido</span>
                    </div>
                    <div class="col-md-6 col-sx-12">
                        <label for="departurefligth">Nº de Vuelo:</label>
                        <input type="text" name="departurefligth" id="Text9" class="form-control" ng-model="regCtrl.data.departurefligth" required/>
                        <span ng-show="form.departurefligth.$dirty && form.departurefligth.$error.required" class="help-block">Nº de Vuelo es requerido</span>
                    </div>
                </div>

                <div class="form-actions col-xs-12 no-width-padding reg-buttoms">
                    <button type="submit" ng-disabled="form.$invalid" class="btn btn-success">Registrar</button>
                    <a href="#!/home" class="btn btn-link btn-cancel">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>